CREATE TABLE USUARIO (ID BIGINT NOT NULL, DTYPE VARCHAR(31), AMBITO_PREFER VARCHAR(255), EMAIL VARCHAR(255), FECHA_PREFER DATE, NOMBRE VARCHAR(255), PASSWORD VARCHAR(255), TELEFONO INTEGER, TRABAJO_PREFER VARCHAR(255), USERNAME VARCHAR(255), APELLIDO1 VARCHAR(255), APELLIDO2 VARCHAR(255), CURSO VARCHAR(255), DNI VARCHAR(255), GRADO VARCHAR(255), PREF_CUATRIMESTRE INTEGER, DEPARATMENTO VARCHAR(255), DESPACHO INTEGER, ROL_GESTOR SMALLINT DEFAULT 0, TITULACION VARCHAR(255), PUESTO VARCHAR(255), UBICACION VARCHAR(255), WEB VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE INSCRIPCION (ID BIGINT NOT NULL, ESTADO SMALLINT DEFAULT 0, FECHA DATE, ES_ADMINISTRADA_POR_ID BIGINT, ESTA_ASOCIADA_A_ID BIGINT, PERTENECE_A_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE ASIGNATURA (ID BIGINT NOT NULL, CURSO INTEGER, GRADO VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE ACTIVIDAD (ID BIGINT NOT NULL, ZONA VARCHAR(255), ESTADO SMALLINT DEFAULT 0, FECHA DATE, HORARIO VARCHAR(255), MOTIVO VARCHAR(255), NOMBRE VARCHAR(255), REQUISITOS VARCHAR(255), TIPO INTEGER, ES_ELEGIDA_POR_ID BIGINT, ES_GESTIONADA_ID BIGINT, ES_GESTIONADA_POR_ID BIGINT, PERTENECE_A_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE PROYECTO (ID BIGINT NOT NULL, ESTADO SMALLINT DEFAULT 0, FECHA DATE, NOMBRE VARCHAR(255), REQUISITOS VARCHAR(255), ES_CREADO_POR_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE INFORME (ID BIGINT NOT NULL, COMENTARIOS VARCHAR(255), FECHA DATE, REPORTADO SMALLINT DEFAULT 0, PRIMARY KEY (ID))
CREATE TABLE matricula_asig_alum (alumno_fk BIGINT NOT NULL, asignatura_fk BIGINT NOT NULL, PRIMARY KEY (alumno_fk, asignatura_fk))
CREATE TABLE INSCRIPCION_INFORME (Inscripcion_ID BIGINT NOT NULL, contiene_ID BIGINT NOT NULL, PRIMARY KEY (Inscripcion_ID, contiene_ID))
CREATE TABLE matricula_asig_pdi (asignatura_fk BIGINT NOT NULL, pdi_fk BIGINT NOT NULL, PRIMARY KEY (asignatura_fk, pdi_fk))
CREATE TABLE ASIGNATURA_ACTIVIDAD (Asignatura_ID BIGINT NOT NULL, trabaja_en_ID BIGINT NOT NULL, PRIMARY KEY (Asignatura_ID, trabaja_en_ID))
CREATE TABLE ACTIVIDAD_INSCRIPCION (Actividad_ID BIGINT NOT NULL, inscripciones_ID BIGINT NOT NULL, PRIMARY KEY (Actividad_ID, inscripciones_ID))
ALTER TABLE INSCRIPCION ADD CONSTRAINT NSCRPCONSTSCADAAID FOREIGN KEY (ESTA_ASOCIADA_A_ID) REFERENCES ACTIVIDAD (ID)
ALTER TABLE INSCRIPCION ADD CONSTRAINT NSCRPCIONPRTNCEAID FOREIGN KEY (PERTENECE_A_ID) REFERENCES USUARIO (ID)
ALTER TABLE INSCRIPCION ADD CONSTRAINT NSCRPCNSDMNSTRDPRD FOREIGN KEY (ES_ADMINISTRADA_POR_ID) REFERENCES USUARIO (ID)
ALTER TABLE ACTIVIDAD ADD CONSTRAINT CTVDADSGSTIONADAID FOREIGN KEY (ES_GESTIONADA_ID) REFERENCES USUARIO (ID)
ALTER TABLE ACTIVIDAD ADD CONSTRAINT CTVDDSGSTNADAPORID FOREIGN KEY (ES_GESTIONADA_POR_ID) REFERENCES USUARIO (ID)
ALTER TABLE ACTIVIDAD ADD CONSTRAINT CTVIDADSLGIDAPORID FOREIGN KEY (ES_ELEGIDA_POR_ID) REFERENCES USUARIO (ID)
ALTER TABLE ACTIVIDAD ADD CONSTRAINT CTVIDADPRTENECEAID FOREIGN KEY (PERTENECE_A_ID) REFERENCES PROYECTO (ID)
ALTER TABLE PROYECTO ADD CONSTRAINT PRYCTOSCREADOPORID FOREIGN KEY (ES_CREADO_POR_ID) REFERENCES USUARIO (ID)
ALTER TABLE matricula_asig_alum ADD CONSTRAINT mtrclasigalumlmnfk FOREIGN KEY (alumno_fk) REFERENCES USUARIO (ID)
ALTER TABLE matricula_asig_alum ADD CONSTRAINT mtrclsgalumsgntrfk FOREIGN KEY (asignatura_fk) REFERENCES ASIGNATURA (ID)
ALTER TABLE INSCRIPCION_INFORME ADD CONSTRAINT NSCRPCNNFORMEcntnD FOREIGN KEY (contiene_ID) REFERENCES INFORME (ID)
ALTER TABLE INSCRIPCION_INFORME ADD CONSTRAINT NSCRPCNNFRnscrpcnD FOREIGN KEY (Inscripcion_ID) REFERENCES INSCRIPCION (ID)
ALTER TABLE matricula_asig_pdi ADD CONSTRAINT mtrclsigpdisgntrfk FOREIGN KEY (asignatura_fk) REFERENCES ASIGNATURA (ID)
ALTER TABLE matricula_asig_pdi ADD CONSTRAINT mtrculaasigpdipdfk FOREIGN KEY (pdi_fk) REFERENCES USUARIO (ID)
ALTER TABLE ASIGNATURA_ACTIVIDAD ADD CONSTRAINT SGNTRCTVIDADtrbjnD FOREIGN KEY (trabaja_en_ID) REFERENCES ACTIVIDAD (ID)
ALTER TABLE ASIGNATURA_ACTIVIDAD ADD CONSTRAINT SGNTRCTVIDADsgntrD FOREIGN KEY (Asignatura_ID) REFERENCES ASIGNATURA (ID)
ALTER TABLE ACTIVIDAD_INSCRIPCION ADD CONSTRAINT CTVDDNSCRnscrpcnsD FOREIGN KEY (inscripciones_ID) REFERENCES INSCRIPCION (ID)
ALTER TABLE ACTIVIDAD_INSCRIPCION ADD CONSTRAINT CTVDDNSCRPCNctvddD FOREIGN KEY (Actividad_ID) REFERENCES ACTIVIDAD (ID)
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT DECIMAL(15), PRIMARY KEY (SEQ_NAME))
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0)
